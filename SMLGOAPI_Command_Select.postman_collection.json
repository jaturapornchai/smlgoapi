{
    "info": {
        "_postman_id": "command-select-api-tests",
        "name": "SMLGOAPI Command & Select Endpoints",
        "description": "Test collection for the universal SQL command and select endpoints",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Health Check",
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{baseUrl}}/health",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "health"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "API Guide for AI Agents",
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{baseUrl}}/guide",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "guide"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "Command - Show Tables",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"query\": \"SHOW TABLES\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/command",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "command"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "Command - Create Test Table",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"query\": \"CREATE TABLE IF NOT EXISTS test_api_table (id UInt32, name String, price Float64, created_at DateTime DEFAULT now()) ENGINE = MergeTree() ORDER BY id\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/command",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "command"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "Command - Insert Data",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"query\": \"INSERT INTO test_api_table (id, name, price) VALUES (1, 'Test Product 1', 29.99), (2, 'Test Product 2', 49.99), (3, 'Test Product 3', 79.99)\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/command",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "command"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "Select - Get All Test Data",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"query\": \"SELECT * FROM test_api_table ORDER BY id\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/select",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "select"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "Select - Filter by Price",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"query\": \"SELECT name, price FROM test_api_table WHERE price > 40 ORDER BY price DESC\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/select",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "select"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "Select - Count Records",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"query\": \"SELECT COUNT(*) as total_records, AVG(price) as avg_price FROM test_api_table\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/select",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "select"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "Command - Update Data",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"query\": \"ALTER TABLE test_api_table UPDATE price = 99.99 WHERE id = 1\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/command",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "command"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "Command - Delete Data",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"query\": \"ALTER TABLE test_api_table DELETE WHERE id = 3\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/command",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "command"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "Select - Verify Changes",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"query\": \"SELECT * FROM test_api_table ORDER BY id\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/select",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "select"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "Command - Drop Test Table",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"query\": \"DROP TABLE IF EXISTS test_api_table\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/command",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "command"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "Test Error Handling - Invalid Query",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"query\": \"INVALID SQL SYNTAX\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/command",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "command"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "Test Error Handling - Non-existent Table",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"query\": \"SELECT * FROM non_existent_table\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/select",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "select"
                    ]
                }
            },
            "response": []
        }
    ],
    "variable": [
        {
            "key": "baseUrl",
            "value": "http://localhost:8008",
            "type": "string"
        }
    ]
}